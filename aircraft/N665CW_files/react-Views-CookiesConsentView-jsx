"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["Views-CookiesConsentView-jsx","Components-Shared-Controls-Toggle-jsx"],{"./React/Components/Shared/Controls/Toggle.jsx":function(e,s,n){n.r(s);var t=n("./node_modules/react/jsx-runtime.js");s.default=e=>{var{isLabelWrapped:s,isHidden:n}=e,o=s=>{var n=document.getElementById(e.id);s.target.className.includes("switch")&&(s.target.checked=!n.checked),e.onChange&&(e.emailAlert?e.onChange(e.emailAlert):e.onChange(s.target.checked))},i=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"toggle"+(n?" hide":""),children:[(0,t.jsx)("input",{id:e.id,type:"checkbox",checked:e.IsChecked,onClick:o,onKeyDown:e=>{"Enter"===e.key&&o()}}),(0,t.jsx)("div",{className:"toggle__switch"+(e.IsChecked?" toggle__switch_checked":"")}),(0,t.jsx)("div",{className:"toggle__track"+(e.IsChecked?" toggle__track_checked":"")})]})});return(0,t.jsx)("div",{className:e.classNames?e.classNames:"",children:s&&e.label?(0,t.jsxs)("label",{children:[i(),(0,t.jsx)("span",{children:e.label})]}):(0,t.jsxs)(t.Fragment,{children:[e.label&&(0,t.jsxs)("label",{className:e.hideLabel?"visually-hidden":"",htmlFor:e.id,children:[" ",e.label]}),i()]})})}},"./React/Views/CookiesConsentView.jsx":function(e,s,n){n.r(s);n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./node_modules/core-js/modules/es.symbol.description.js");var t=n("./node_modules/react/index.js"),o=n("./node_modules/recoil/es/recoil.js"),i=n("./React/Components/Utilities/SandhillsUtility.jsx"),a=n("./React/Components/Utilities/SandhillsConstants.jsx"),r=n("./React/Components/Utilities/CookieHelper.jsx"),l=n("./React/Components/Shared/Modals/Modal.jsx"),c=n("./React/Components/Shared/Controls/Toggle.jsx"),d=n("./React/Components/Utilities/SandhillsAtoms.jsx"),u=n("./node_modules/react/jsx-runtime.js");function C(e,s){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);s&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,t)}return n}function g(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?C(Object(n),!0).forEach(function(s){h(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function h(e,s,n){return(s=function(e){var s=function(e,s){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,s||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==typeof s?s:s+""}(s))in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n,e}var m=e=>{var{Actions:s,Buttons:n,Toggles:C,Message:h,RequireInternationalConsent:m,CookieSettings:k,Classifications:S}=e,f=(0,o.useRecoilValue)(d.default.currentUser),[b,I]=(0,t.useState)(k),[p,j]=(0,o.useRecoilState)(d.default.showCookieConsent),y=(0,o.useRecoilValue)(d.default.routes);(0,t.useEffect)(()=>{p&&((0,i.allowModalBackgroundScroll)(),m&&null==(0,r.getConsentCookieJSON)()&&N())},[p]),(0,t.useEffect)(()=>{D(),x(),m&&v()},[]);var v=()=>{if(f.IsAuthenticated){var e,s=(0,r.getConsentCookie)(!0),n=(0,r.getAllSavedCookieNames)().filter(e=>e.includes(a.consentCookieNames.SandhillsConsent+"-")),t=(0,r.getConsentCookie)();if(s)0!=n.length&&!s.ShouldResync&&null!=t||s.TrackingUserID&&(null==s?void 0:s.TrackingUserID)!=b.TrackingUserID?m&&null!==(e=t)&&void 0!==e&&e.ShouldResync?_(t):t&&s.TrackingUserID!=t.TrackingUserID&&(0,r.SetSandhillsConsentCookie)(t,U(t.ConsentStatus)):((0,r.setConsentChanged)(s),t=s,s.TrackingUserID&&(s.TrackingUserID=b.TrackingUserID),(0,r.SetSandhillsConsentCookie)(s,U(s.ConsentStatus),s.TrackingUserID),I(s),m&&(s.ShouldResync||(null==s?void 0:s.WebAgreementConsentID)<=0)&&_(s));else t&&(0,r.SetSandhillsConsentCookie)(t,U(t.ConsentStatus));null==t&&((0,r.setConsentChanged)(b),j(!0))}},D=()=>{var e=document.getElementById("open-consent-modal");e&&(e.setAttribute("tabIndex",0),e.setAttribute("role","button"),e.onclick=function(e){e.preventDefault(),j(!0)})},x=()=>{var e=(0,r.getConsentCookie)(),s=!0;if((null==b?void 0:b.TrackingUserID)>0&&f.IsAuthenticated){var n=(0,r.getConsentCookie)(!0);(null==n?void 0:n.TrackingUserID)==(null==e?void 0:e.TrackingUserID)&&(null==n?void 0:n.WebAgreementID)==(null==b?void 0:b.WebAgreementID)&&(null==e?void 0:e.WebAgreementID)!=(null==b?void 0:b.WebAgreementID)&&((0,r.SetSandhillsConsentCookie)(n,U(n.ConsentStatus),n.TrackingUserID),s=!1)}e&&s&&e.WebAgreementID!=b.WebAgreementID&&(document.cookie=(0,r.getConsentCookieName)()+"=; expires="+(0,r.getExpireTimeUTCStringForCookies)(-1)+"; path=/; domain=."+(0,r.getRootDomain)(),document.cookie=(0,r.getConsentCookieName)(!0)+"=; expires="+(0,r.getExpireTimeUTCStringForCookies)(-1)+"; path=/; domain=."+(0,r.getRootDomain)(),N(),j(!0))},A=(e,s)=>{var n=(0,r.getConsentCookieJSON)();(!n||n&&s)&&(s=!m||s,I(n=>{var t=g(g({},n),{},{ConsentStatus:T(s,n.ConsentStatus),ActionDateTime:(new Date).toISOString(),ShouldResync:m});return m&&!(0,i.stringEqualsIgnoreCase)(e,"saveselections")&&S.forEach(s=>{(0,i.stringEqualsIgnoreCase)(e,s)||(0,i.stringEqualsIgnoreCase)(s,a.sandhillsCookieClassifications.StrictlyNecessary)||(t[s]=!(0,i.stringEqualsIgnoreCase)(e,a.sandhillsCookieClassifications.StrictlyNecessary))}),(0,r.SetSandhillsConsentCookie)(t,U(t.ConsentStatus)),m&&(f.IsAuthenticated&&(null==n?void 0:n.TrackingUserID)>0&&(0,r.SetSandhillsConsentCookie)(t,U(t.ConsentStatus),n.TrackingUserID),(0,r.setConsentChanged)(t),_(t)),t})),j(!1)},_=e=>{m&&f.IsAuthenticated&&(0,i.sandhillsRequest)({url:y.SaveCookieConsent,method:"post",data:{consentSettings:e},errorHandling:{message:"Error Saving Cookie Preferences.",showDetails:!0,useConsole:!0,useAlert:!1}}).then(e=>{e&&I(s=>(e.WebAgreementConsentID&&e.WebAgreementConsentID>0&&(s.WebAgreementConsentID=e.WebAgreementConsentID),s.ShouldResync=e.ShouldResync,(0,r.SetSandhillsConsentCookie)(e,U(s.ConsentStatus)),e.TrackingUserID&&e.TrackingUserID>0&&(0,r.SetSandhillsConsentCookie)(e,U(s.ConsentStatus),e.TrackingUserID),s))})},N=()=>{I(e=>{var n=g(g({},e),{},{ConsentStatus:s.Deny,ActionDateTime:null,ShouldResync:m});return S.forEach(e=>{n[e]=(0,i.stringEqualsIgnoreCase)(e,a.sandhillsCookieClassifications.StrictlyNecessary)}),n})},T=(e,n)=>{var t=n;return e&&(t=n===s.Deny?s.Accept:n===s.Accept||n===s.Update?s.Update:s.Deny),t},U=e=>{var n=400;return m&&e==s.Deny&&(n=30),n};return(0,u.jsx)(u.Fragment,{children:p&&(0,u.jsxs)(l.default,{containerClassName:"cookies-consent",allowScroll:!0,children:[(0,u.jsx)(l.default.Header,{onClose:()=>A(a.sandhillsCookieClassifications.StrictlyNecessary,!1),xMarkClassName:"fa-regular fa-circle-xmark",children:(0,u.jsx)("div",{className:"cookies-inner",children:(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})}),m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.default.Body,{bodyClassName:"toggle-container",children:C.map(e=>{return(0,u.jsx)(c.default,{classNames:"toggle-label"+((0,i.stringEqualsIgnoreCase)(e.Classification,a.sandhillsCookieClassifications.StrictlyNecessary)?" shouldDisable":""),id:e.Id+"-toggle",IsChecked:b[e.Classification],isHidden:(0,i.stringEqualsIgnoreCase)(e.Classification,a.sandhillsCookieClassifications.StrictlyNecessary),onChange:s=>((e,s)=>{(0,i.stringEqualsIgnoreCase)(s)||I(n=>g(g({},n),{},{[s]:e}))})(s,e.Classification),label:(s=e.Classification,n=e.Label,(0,i.stringEqualsIgnoreCase)(s,a.sandhillsCookieClassifications.StrictlyNecessary)?(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:n}}):n),isLabelWrapped:!0},e.Id);var s,n})}),(0,u.jsx)("div",{className:"btn-container",children:n.map(e=>(0,u.jsx)("button",{className:"btn",id:e.Id,onClick:()=>A(e.Classification,!0),children:e.Label},e.Id))})]})]})})};s.default=m,n.g.CookiesConsentView=m}}]);
//# sourceMappingURL=/Scripts/compiled/react/client/source_maps/chunks/Views-CookiesConsentView-jsx.js.map
